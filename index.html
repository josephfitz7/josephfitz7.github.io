<!DOCTYPE HTML>
<html>
	<body style = "background-color:cyan" onkeydown = "go(event)">
		<table>
			<tbody id = "table">
				<tr class = "con" id = "con1">
					<td><input type="text" id = "fx"> x</td>
					<td><input type="text" id = "fy"> x</td>
					<td><input type="text" id = "fz"></td>
					<td id = "click"><button onclick = "calc('con1')" id = "e1">=</button></td>
					<td id = "cubFeet"></td>
					<td id = "gallons"></td>
				</tr>
			</tbody>
		</table>
		<button onclick = "oneMore()"> ONE MORE</button>
	</body>
	<script type="text/javascript">
		
		var amount = 1;
		
		function calc(id)
		{
			
				var ele = document.getElementById(id);
				//alert(id.toString());
				var x = intoFeet(ele.querySelector("#fx").value);
				var y = intoFeet(ele.querySelector("#fy").value);
				var z = intoFeet(ele.querySelector("#fz").value);

				var tot = x * y * z;
				//alert("x: " + x + " y: " + y + " z: " + z);
				ele.querySelector("#cubFeet").innerHTML = tot.toFixed(3).toString() + " Cubic Feet = ";
				ele.querySelector("#gallons").innerHTML = cubFeet_Gallons(tot).toFixed(2) + " Gallons";
				
				
		}
	
		function oneMore()
		{
			var table = document.getElementById("table");
			var ele = document.getElementById("con" + amount).cloneNode(true);
			amount = amount + 1;
			table.appendChild(ele);			
			ele.id = "con" + amount;
			
			//alert(table.childNodes[table.childNodes.length - 1].id);
			//alert(ele.childNodes[7].id);
			ele.querySelector("#click").querySelector("#e1").setAttribute("onclick","calc('" + ele.id + "')");
			
		}
		
		function cubFeet_Gallons(tot)
		{
			return tot / .133681;
		}

		function intoFeet(inches)
		{
			if(inches.charAt(inches.length - 1) == '"')
			{
				return parseFloat(inches.substring(0, inches.length - 1))/12;
			}
			else if(inches.charAt(inches.length - 1) == '\'')
			{
				return parseFloat(inches.substring(0, inches.length - 1));
			}
			else
			{
				return parseFloat(inches);
			}
		}

		function go(event)
		{
			var x = event.which|| event.keyCode;

			if(x == 13)
			{
				for(var i = 1; i <= amount; i++)
				{
					calc("con" + i);
				}
			}
		}

	</script>
</html>